# 查重系统报告与前端交互规范 (Report Architecture & Frontend Specification) v2.0

**版本**: v2.0
**日期**: 2025-11-27
**目标**: 定义查重系统的数据输出标准、前端展示逻辑及**正式打印报告**规范，确保输出结果具备商业洞察力、证据链完整性及视觉专业度。

---

## 1. 核心设计原则 (Core Principles)

*   **数据驱动**: 结论基于数据库事实。
*   **分层展示**: 概览 -> 交互式大屏 -> 静态存档报告。
*   **赛道隔离**: 理论与知识点分开评判。
*   **严谨分级**: High/Medium/Low 三级预警。

---

## 2. 后端输出数据结构 (JSON Schema)
*(此部分保持 v1.0 不变，服务于 Web 前端)*
*   包含 `AnalysisReport` 对象、`MatchItem` 结构及 `Evidence` 链。

---

## 3. 前端展示布局规划 (Web Dashboard)
*(此部分保持 v1.0 不变，服务于交互式查看)*
*   **仪表盘**: 创新指数、雷达图。
*   **分赛道 Tab**: 理论/知识点列表。
*   **证据透视**: 左右对照、时间线。

---

## 4. 可打印 PDF 报告规范 (Printable PDF Specification) **[NEW]**

本模块定义了用于**正式存档、打印**的 PDF 报告结构。生成的 PDF 应具备学术论文级别的严肃性和专业性。

### 4.1 页面设置
*   **纸张**: A4
*   **边距**: 上下 2.54cm, 左右 3.17cm (标准公文页边距)
*   **字体**: 
    *   中文字体: 宋体 (SimSun) 或 思源宋体 (正文), 黑体 (标题)
    *   英文字体: Times New Roman
*   **页眉/页脚**:
    *   页眉: "FDC 商业案例库查重报告" (右对齐, 10pt 灰色)
    *   页脚: "Page X of Y" (居中, 10pt) + 生成时间 (左对齐)

### 4.2 报告内容结构

#### **封面 (Cover Page)**
*   **Logo**: 顶部居中 (可选项目 Logo)
*   **主标题**: "商业案例查重分析报告" (24pt, 加粗, 居中)
*   **目标文件**: [文件名] (16pt, 居中)
*   **检测时间**: YYYY-MM-DD HH:MM
*   **检测结果摘要 (Summary Box)**:
    *   **总体重复/相关率**: [XX]% (粗体)
    *   **最高风险项**: [XX] 个
    *   **理论重合度**: [High/Medium/Low]
    *   **知识点重合度**: [High/Medium/Low]
*   **声明**: "本报告基于 FDC-21 至 FDC-25 历史案例库生成，结果仅供参考。" (底部, 10pt)

#### **第一章：检测概览 (Chapter 1: Overview)**
*   **1.1 指标统计**: 使用简洁的表格展示 High/Medium/Low 风险项的数量分布。
*   **1.2 创新性评价**: 基于查重结果，生成一段简短的 AI 评价（例如：“该案例在理论框架上沿用了经典的...，但在具体知识点应用上与 FDC-23 的某案例有较高重合度...”）。

#### **第二章：理论框架查重详情 (Chapter 2: Theoretical Framework Check)**
*   *排版风格*: 每一个查重项为一个独立的“证据块”。
*   **[编号] 理论名称** (14pt, 加粗)
    *   **风险等级**: [High - 高度相关] (红色/加粗)
    *   **原文片段**: "......(引用新文件内容)......" (楷体/Italic)
    *   **[相似来源 1]**: FDC-22-某公司.pdf (2022)
        *   *历史片段*: "......(引用旧文件内容)......"
    *   **[相似来源 2]**: ...
    *   **判定理由**: (AI 生成的简短理由，如“完全同义词匹配”)

#### **第三章：实务知识点查重详情 (Chapter 3: Practical Concepts Check)**
*   结构同第二章。重点展示行业术语和商业模式的雷同。

#### **附录：检测元数据 (Appendix)**
*   检测范围说明（涵盖的文件年份、数量）。
*   检测算法说明（基于语义向量及上下文比对）。

### 4.3 技术实现路径
Python 后端将使用 `reportlab` 或 `fpdf` 库直接生成 PDF，或者先生成 HTML 模板（使用 Jinja2）再通过 `wkhtmltopdf` 转换为 PDF。建议采用 **HTML -> PDF** 路径，因为样式调整最灵活，且容易与 Web 前端样式统一。

---

## 5. 颜色与视觉规范 (Visual Guidelines)

*   **PDF 打印版**: 
    *   尽量避免大面积色块，使用**灰度背景**、**加粗**、**下划线**来区分层级，确保黑白打印机也能清晰输出。
    *   高风险项可保留深红色字体，但在黑白模式下应有文字标注（如“[高风险]”）。